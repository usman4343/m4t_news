var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,a,b){c instanceof String&&(c=String(c));for(var d=c.length,e=0;e<d;e++){var f=c[e];if(a.call(b,f,e,c))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,b){c!=Array.prototype&&c!=Object.prototype&&(c[a]=b.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,a,b,d){if(a){b=$jscomp.global;c=c.split(".");for(d=0;d<c.length-1;d++){var e=c[d];e in b||(b[e]={});b=b[e]}c=c[c.length-1];d=b[c];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(b,c,{configurable:!0,writable:!0,value:a})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
(function(c){c.fn.sq_blocklogin=function(){var a=this;a.sq_autoLogin=function(){if(!a.checkEmail(a.find("#sq_email").val()))return a.find(".sq_error").html(__invalid_email),a.find("#sq_register_email").show(),a.find("#sq_register").html(__try_again),!1;a.find("#sq_register").html(__connecting);a.find("#sq_register_wait").addClass("sq_minloading");a.find(".sq_message").hide();c.post(sqQuery.ajaxurl,{action:"sq_register",email:a.find("#sq_email").val(),nonce:sqQuery.nonce}).done(function(b){a.find("#sq_register_wait").removeClass("sq_minloading");
"undefined"!==typeof b.token?(__token=b.token,"undefined"!==typeof b.success&&c("#sq_login_success").html(b.success),a.sq_reload(b)):"undefined"!==typeof b.info?(a.find("#sq_autologin").hide(),a.find("ul").show(),a.find(".sq_message").html(b.info).show(),a.find("#sq_user").val(a.find("#sq_email").val()),a.find("#sq_password").focus()):"undefined"!==typeof b.error&&(a.find(".sq_error").html(b.error),a.find("#sq_register_email").show(),a.find("#sq_register").html(__try_again))}).fail(function(b){if(200===
b.status&&0<b.responseText.indexOf("{")){b.responseText=b.responseText.substr(b.responseText.indexOf("{"),b.responseText.lastIndexOf("}"));try{b=c.parseJSON(b.responseText),"undefined"!==typeof b.info?(a.find("#sq_autologin").hide(),a.find("ul").show(),a.find(".sq_message").html(b.info).show(),a.find("#sq_user").val(a.find("#sq_email").val()),a.find("#sq_password").focus()):"undefined"!==typeof b.error&&(a.find(".sq_error").html(b.error),a.find("#sq_register_email").show(),a.find("#sq_register").html(__try_again))}catch(d){}}else a.find("#sq_register_wait").removeClass("sq_minloading"),
a.find(".sq_error").html(__error_login),a.find("#sq_register_email").show(),a.find("#sq_register").html(__try_again)},"json")};a.sq_reload=function(b){"undefined"!==typeof b.success&&c("#sq_login_success").html(b.success);0<c("#postsquirrly").length?(a.remove(),location.reload()):(a.addClass("sq_login_done"),a.html(c("#sq_login_success")),a.append(c("#sq_goto_dashboard")),c("#sq_login_success").show(),c("#sq_goto_dashboard").show(),a.find(".sq_login_link").after(c("#sq_goto_dashboard").clone()),a.find(".sq_login_link").remove(),
c(".sq_goto_dashboard").on("click",function(){location.href="?page=sq_dashboard"}))};a.checkEmail=function(a){var b=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;return""!==a?b.test(a):!0};a.find("#sq_email").on("keypress",function(a){13===a.keyCode&&c.sq_autoLogin();return 13!==a.keyCode});a.find("#sq_user").on("keypress",function(b){13===b.keyCode&&a.find("#sq_login").trigger("click");return 13!==b.keyCode});a.find("#sq_password").on("keypress",function(b){13===b.keyCode&&a.find("#sq_login").trigger("click");
return 13!==b.keyCode});a.find("#sq_terms").on("click",function(){1==c(this).prop("checked")?a.find("#sq_loginimage").css("opacity","1"):a.find("#sq_loginimage").css("opacity","0.4")});a.find("#sq_signin").on("click",function(b){a.find("#sq_autologin").hide();a.find("ul").show();a.find("#sq_user").val(c("#sq_email").val());a.find("#sq_email").focus()});a.find("#sq_signup").on("click",function(b){a.find("#sq_autologin").show();a.find("ul").hide();a.find("#sq_email").focus()});a.find("#sq_login").on("click",
function(){a.find("#sq_login").addClass("sq_minloading");a.find("#sq_login").attr("disabled","disabled");a.find("#sq_login").val("");c.post(sqQuery.ajaxurl,{action:"sq_login",user:a.find("#sq_user").val(),password:a.find("#sq_password").val(),nonce:sqQuery.nonce}).done(function(b){"undefined"!==typeof b.error&&"invalid_token"===b.error&&c.post(sqQuery.ajaxurl,{action:"sq_reset",nonce:sqQuery.nonce}).done(function(a){"undefined"!==typeof a.reset&&"success"===a.reset&&location.reload()},"json");a.find("#sq_login").removeAttr("disabled");
a.find("#sq_login").val("Login");a.find("#sq_login").removeClass("sq_minloading");"undefined"!==typeof b.token?(__token=b.token,a.sq_reload(b)):"undefined"!==typeof b.error&&a.find(".sq_error").html(b.error)}).fail(function(b){if(200===b.status&&0<b.responseText.indexOf("{")){b.responseText=b.responseText.substr(b.responseText.indexOf("{"),b.responseText.lastIndexOf("}"));try{b=c.parseJSON(b.responseText),a.find("#sq_login").removeAttr("disabled"),a.find("#sq_login").val("Login"),a.find("#sq_login").removeClass("sq_minloading"),
"undefined"!==typeof b.token?(__token=b.token,a.sq_reload(b)):"undefined"!==typeof b.error&&a.find(".sq_error").html(b.error)}catch(d){}}else a.find("#sq_login").removeAttr("disabled"),a.find("#sq_login").val("Login"),a.find("#sq_login").removeClass("sq_minloading"),a.find(".sq_error").html(__error_login)},"json")});return a};0<c("#sq_blocklogin").length?c("#sq_blocklogin").sq_blocklogin():c(document).ready(function(){c("#sq_blocklogin").sq_blocklogin()})})(jQuery);
